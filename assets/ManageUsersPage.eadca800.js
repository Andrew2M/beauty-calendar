import{u as N,b as C,s as _,a as e,c as b,r as k,j as a,F as A,d as D,A as G,e as M,f as w,g as z,h as E}from"./index.852f85f4.js";import{T as P}from"./ToggleButton.b50f74d7.js";const I=({pageNumber:n})=>{const s=N(),{userListPagination:r}=C(_),{page:i}=r;return e("button",{className:`button__square button--transparent${i===n?" button--primary-dark":""}`,onClick:()=>{s(b({...r,page:n}))},children:n})},q=()=>{const{userListPagination:n}=C(_),{totalPages:s}=n,r=s?[...Array(s).keys()].map(i=>e(I,{pageNumber:i+1},`page-${i}`)):null;return e("div",{className:"flex",children:r})},Q=()=>{const n=N(),[s,r]=k.exports.useState(""),{userListPagination:i}=C(_),[l,u]=k.exports.useState({isActive:!1,isBlocked:!1,role:"client"}),g=t=>{r(t.target.value)},p=()=>{n(b({phone:s}))},o=t=>{t.target.type==="radio"&&(u({...l,[t.target.name]:t.target.value}),n(b({...i,...l,phone:void 0,page:1,[t.target.name]:t.target.value}))),t.target.type==="checkbox"&&(u({...l,[t.target.id]:t.target.checked}),n(b({...i,...l,phone:void 0,page:1,[t.target.id]:t.target.checked})))};return a(A,{children:[e("input",{onChange:o,type:"checkbox",name:"isActive",id:"isActive"}),e("label",{htmlFor:"isActive",children:"isActive"}),e("input",{onChange:o,type:"checkbox",name:"isBlocked",id:"isBlocked"}),e("label",{htmlFor:"isBlocked",children:"isBlocked"}),e("fieldset",{children:a("div",{className:"",children:[e("input",{onChange:o,type:"radio",name:"role",id:"specialist",value:"specialist"}),e("label",{htmlFor:"specialist",children:"Specialist"}),e("input",{onChange:o,type:"radio",name:"role",id:"client",value:"client",defaultChecked:!0}),e("label",{htmlFor:"client",children:"Client"})]})}),e("input",{type:"text",name:"",id:"",value:s,onChange:g}),e("button",{onClick:p,children:"go"})]})},H=({props:n})=>{const{_id:s,name:r,photo:i,role:l,phone:u,email:g,isActive:p,isBlocked:o,serviceTypes:t,activeServices:v,isAvailable:B,present:U,absent:L}=n,m=k.exports.useRef(),[c,y]=k.exports.useState({serviceTypes:t}),[T,{isLoading:F,isError:j,error:O}]=D(),$=d=>{y({...c,_id:s,[d.target.id]:d.target.value})},f=d=>{var x;let h=(x=c==null?void 0:c.serviceTypes)!=null&&x.length?c.serviceTypes:[];switch(d.target.name){case"add":if(h.includes(m.current.value))return;h=[...h,m.current.value];break;case"remove":h=h.filter(V=>V!==m.current.value);break;case"reset":h=[...t];break}y({...c,_id:s,[m.current.id]:h})},S=d=>{y({...c,_id:s,[d.target.name]:d.target.checked})},R=async()=>{await T(c),j&&console.log(O)};return a("div",{className:"card spacing",children:[a("div",{className:"card__header",children:[e(G,{className:"avatar__round",photo:`${M.baseImgURL}/${i}`,name:r}),a("div",{className:"",children:[a("div",{className:"card__header",children:[e("h3",{children:r}),a("select",{className:"form__select",defaultValue:l,name:"role",id:"role",onChange:$,children:[e("option",{value:"client",children:"client"}),e("option",{value:"specialist",children:"specialist"})]})," "]}),a("div",{className:"flex",children:[e(P,{id:`${s}-isActive`,isChecked:p,handleOnChange:S,name:"isActive",children:"Activ"}),e(P,{id:`${s}-isBlocked`,isChecked:o,handleOnChange:S,name:"isBlocked",children:"Blocat"})]})]})]}),a("div",{className:"flex",children:[a("p",{children:["Prezente: ",U]}),a("p",{children:["Absente: ",L]})]}),l==="specialist"&&a(A,{children:[a("div",{className:"card__header",children:[e("button",{className:"button__default button--error",name:"remove",onClick:f,children:"-"}),a("select",{ref:m,defaultValue:t[0],id:"serviceTypes",onChange:f,className:"form__select",children:[e("option",{value:"frizerie",children:"frizerie"}),e("option",{value:"extensii",children:"extensii"}),e("option",{value:"cosmetica",children:"cosmetica"}),e("option",{value:"manichiura",children:"manichiura"}),e("option",{value:"pedichiura",children:"pedichiura"}),e("option",{value:"masaj",children:"masaj"}),e("option",{value:"machiaj",children:"machiaj"})]}),e("button",{className:"button__default button--success",name:"add",onClick:f,children:"+"})]}),e("button",{name:"reset",onClick:f,children:"reset"}),e("span",{className:"",children:(c==null?void 0:c.serviceTypes)&&c.serviceTypes.map((d,h)=>e("span",{className:"badge badge--primary",children:d},h))})]}),l=="specialist"&&a("div",{className:"flex",children:[a("p",{children:["Servicii active: ",v]}),a("p",{children:["Disponibil: ",B?"Da":"Nu"]})]}),a("div",{className:"",children:[e("p",{children:g}),e("p",{children:u})]}),e("button",{onClick:R,className:"button__default button--success to-right",children:F?e(w,{}):"modifica"})]})},J=()=>{var o,t;const{userListPagination:n}=C(_),{isLoading:s,isSuccess:r,data:i,isError:l,error:u,refetch:g}=z(n,{refetchOnMountOrArgChange:!0});let p=null;return r&&(p=(o=i==null?void 0:i.users)!=null&&o.length?i.users.map(v=>e(H,{props:v},v._id)):e("p",{children:"Nu s-au gasit rezultate"})),a(A,{children:[s?e(E,{from:"Users List"}):null,l?e("p",{children:(t=u==null?void 0:u.data)==null?void 0:t.message}):null,p]})},X=()=>(N(),a("div",{className:"container__inner",children:[e(Q,{}),e(q,{}),e(J,{})]}));export{X as default};
