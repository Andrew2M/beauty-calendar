import{b,ad as C,s as j,u as y,ae as U,af as $,ag as z,j as m,a as t,ah as v,ai as F,aj as R,ak as P,r as N}from"./index.d20a92f6.js";import{O as E}from"./OptionSelectService.63d6dab5.js";const G=({setFormData:o,formData:r,setIsActive:l,isActive:n})=>{const{serviceId:d}=b(C),{specialistId:p}=b(j),{name:u,price:f,duration:a,description:i}=r,h=y(),[x,{isLoading:M}]=U(),[O,{isLoading:w}]=$(),[A,{isLoading:k}]=z(),S=e=>{var s,c;console.log((c=(s=e==null?void 0:e.error)==null?void 0:s.data)==null?void 0:c.message)},_=e=>{var s,c;console.log((c=(s=e==null?void 0:e.error)==null?void 0:s.data)==null?void 0:c.message),o({name:"",description:"",duration:"",price:""}),l(!1),h(F())},g=e=>{o(s=>({...s,[e.target.id]:e.target.value}))},D=async()=>{const e=await x({isActive:n,specialistId:p,...r});"error"in e?S(e):_(e)},I=async()=>{var s,c;if(!u||!f||!a||!i){console.log((c=(s=e==null?void 0:e.error)==null?void 0:s.data)==null?void 0:c.message);return}const e=await O({specialistId:p,serviceId:d,isActive:n,...r});"error"in e?S(e):_(e)},L=async()=>{const e=await A({serviceId:d,specialistId:p});"error"in e?S(e):_(e)};return m("form",{className:"spacing",onSubmit:async e=>{e.preventDefault()},children:[d?t("div",{className:"form__group",children:m("label",{className:"toggle",htmlFor:"isActive",children:[t("input",{className:"toggle__input",checked:n,onChange:e=>l(e.target.checked),type:"checkbox",id:"isActive"}),"Serviciu vizibil",t("div",{className:"toggle__fill"})]})}):t("p",{}),t(v,{fieldlabel:"Nume",htmlFor:"name",onChange:g,value:u,className:`form__input${u&&" filled"}`,id:"name",type:"text",ref:null,elementtype:"input",autoComplete:"off"}),t(v,{fieldlabel:"Desriere",htmlFor:"description",onChange:g,rows:2,value:i,className:`form__input${i&&" filled"}`,id:"description",type:"text",ref:null,elementtype:"textarea",autoComplete:"off"}),t(v,{fieldlabel:"Durata (min)",htmlFor:"duration",onChange:g,value:a,className:`form__input${a&&" filled"}`,id:"duration",type:"number",ref:null,elementtype:"input",autoComplete:"off"}),t(v,{fieldlabel:"Pret (RON)",htmlFor:"price",onChange:g,value:f,className:`form__input${f&&" filled"}`,id:"price",type:"number",ref:null,elementtype:"input",autoComplete:"off"}),d?m("div",{className:"form__submit-group flex",children:[m("button",{className:"button__default button--error",onClick:L,children:[" ",k?"Deleting ...":"Sterge"]}),t("button",{className:"button__default button--success",onClick:I,children:w?"Updating ...":"Modifica"})]}):t("div",{className:"form__submit-group",children:t("button",{className:"button__default button--success",onClick:D,children:M?"Adding service ...":"Creaza"})})]})},Q=({setFormData:o,setIsActive:r})=>{const{serviceId:l}=b(C),n=y(),{isLoading:d,isSuccess:p,data:u}=R(void 0,{refetchOnMountOrArgChange:!0}),f=a=>{if(a.target.value=="")return o({name:"",description:"",duration:"",price:""}),n(F());const i=u.filter(h=>h._id===a.target.value)[0];r(i.isActive),o({name:i.name,description:i.description,duration:i.duration,price:i.price}),n(P(i._id))};return m("select",{name:"services",id:"services",className:"form__select form__select-100",onChange:a=>f(a),value:l,children:[t("option",{value:"",children:d?"Lista se incarca ...":" Creaza serviciu nou"}),p&&u.map(a=>t(E,{service:a},a._id))]})},T=()=>{const[o,r]=N.exports.useState(!1),[l,n]=N.exports.useState({name:"",description:"",duration:"",price:""});return m("div",{className:"form__container card",children:[t(Q,{setIsActive:r,setFormData:n}),t(G,{setFormData:n,formData:l,setIsActive:r,isActive:o})]})},J=()=>t("div",{className:"container__inner",children:t(T,{})});export{J as default};
